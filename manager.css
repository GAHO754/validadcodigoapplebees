:root{
  --bg:#0b0d11; --card:#141821; --muted:#aeb4c0;
  --line:#222836; --brand:#e65151; --ok:#86e38f; --warn:#ffdfaa; --err:#ff9a9a;
}
*{ box-sizing:border-box; }
html,body{ height:100%; }
body.bg{
  margin:0;
  background:
    radial-gradient(1200px 600px at 20% -10%, #1a1f2a 0, transparent 60%),
    radial-gradient(1200px 800px at 100% 10%, #1d1321 0, transparent 60%),
    var(--bg);
  color:#fff; font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu;
}

/* Topbar */
.topbar{
  position:sticky; top:0; display:flex; justify-content:space-between; align-items:center;
  gap:12px; padding:12px 16px; border-bottom:1px solid var(--line);
  background:linear-gradient(180deg, rgba(12,14,18,.9), rgba(12,14,18,.65));
  backdrop-filter: blur(6px); z-index:2;
}
.brand{ display:flex; align-items:center; gap:10px; }
.logo{ width:28px; height:28px; }
.actions{ display:flex; align-items:center; gap:8px; }
.muted{ color:var(--muted); }

/* Controles */
.btn{ border:1px solid var(--line); background:#1b2130; color:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; }
.btn:hover{ background:#20283a; }
.btn.primary{ border-color:#ffb0b0; background: linear-gradient(180deg, #ff6b6b, #e64b4b); }
.btn.primary:hover{ filter:brightness(1.05); }
.btn.ghost{ background:transparent; }
.btn:disabled, .btn[disabled]{ opacity:.55; cursor:not-allowed; filter:grayscale(.2); }

.select, input{
  background:#0f1420; border:1px solid var(--line); color:#fff; padding:10px 12px; border-radius:10px;
}
input:focus, .select:focus, textarea:focus, select:focus{
  outline: 2px solid #3954ff55; border-color: #3954ff55; box-shadow: 0 0 0 3px #3954ff22;
}
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; letter-spacing:.5px; }
.msg{ margin-top:8px; min-height:18px; }
.msg.ok{ color: var(--ok); } .msg.err{ color: var(--err); } .msg.warn{ color: var(--warn); }

/* Layout */
.container{ max-width:1100px; margin: 24px auto 40px; padding: 0 16px; }
.card{ background:var(--card); border:1px solid var(--line); border-radius:16px; padding:16px; }
.card.auth{ max-width:520px; margin: 40px auto; }
.card-header{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px; }
.grid{ display:grid; gap:10px; }
.grid2{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
@media (max-width:900px){ .grid2{ grid-template-columns: 1fr; } }
.field{ display:flex; flex-direction:column; gap:6px; }
.row{ display:flex; gap:8px; align-items:center; }
.grow{ flex:1; }
.sep{ border:0; border-top:1px solid var(--line); margin:14px 0; }
.mt8{ margin-top:8px; } .mt12{ margin-top:12px; } .mt16{ margin-top:16px; }
.wrap{ flex-wrap: wrap; }

/* Esc√°ner */
.qr-region{ width:100%; min-height:300px; background:#0f1420; border:1px dashed #344; border-radius:12px;
  display:flex; align-items:center; justify-content:center; overflow:hidden; }
.qr-region video{ width:100%; height:auto; object-fit:cover; }

/* Switch (linterna) */
.switch{ position:relative; display:inline-block; width:44px; height:24px; }
.switch input{ display:none; }
.slider{ position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0; background:#2a3347; transition:.2s; border-radius:24px; border:1px solid var(--line); }
.slider:before{ position:absolute; content:""; height:20px; width:20px; left:2px; top:1px; background:white; transition:.2s; border-radius:20px; }
input:checked + .slider{ background:#3a4d7f; }
input:checked + .slider:before{ transform:translateX(20px); }

/* Redeem card */
.redeem .label{ color:var(--muted); margin-bottom:2px; }
.redeem .tag{ background:#0e1522; border:1px solid var(--line); border-radius:999px; padding:2px 8px; margin-right:6px; }
.redeem-head{ display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
.status{
  font-weight:700; padding:6px 10px; border-radius:10px;
  border:1px solid rgba(255,255,255,.12); background:#111722; color:#fff;
}
.status.pending{  color:#ffdfaa; background: rgba(255,223,170,.12); border-color: rgba(255,223,170,.35); }
.status.redeemed{ color:#86e38f; background: rgba(134,227,143,.12); border-color: rgba(134,227,143,.35); }
.status.expired{  color:#ff9a9a; background: rgba(255,154,154,.12); border-color: rgba(255,154,154,.35); }

/* KPIs */
.kpi-deck{ display:grid; gap:12px; margin:10px 0 14px; grid-template-columns: repeat(4, minmax(0,1fr)); }
.kpi{
  position:relative; border:1px solid var(--line); border-radius:16px; padding:14px 16px;
  background:
    radial-gradient(80% 180% at 10% -40%, rgba(230,81,81,.10), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  box-shadow: 0 10px 30px rgba(0,0,0,.25); overflow:hidden;
}
.kpi::after{
  content:""; position:absolute; right:-30px; top:-30px; width:110px; height:110px;
  border-radius:50%; background:radial-gradient(closest-side,#ff6b6b22,transparent); filter: blur(10px);
}
.kpi__label{ color:var(--muted); font-size:.9rem; letter-spacing:.2px; }
.kpi__value{ font-size:2rem; font-weight:900; line-height:1; margin-top:2px; }
@media (max-width:900px){ .kpi-deck{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width:520px){ .kpi-deck{ grid-template-columns: 1fr; } }

/* Toolbar de filtros */
.toolbar{
  display:flex; align-items:flex-end; justify-content:space-between; gap:12px; padding:10px;
  border:1px solid var(--line); border-radius:14px;
  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
  margin-bottom:10px;
}
.toolbar__group{ display:flex; gap:10px; flex-wrap:wrap; align-items:flex-end; flex:1; }
.toolbar .field.sm span{ font-size:.8rem; color:var(--muted); }
.toolbar .field.sm input, .toolbar .field.sm select{ padding:9px 12px; border-radius:10px; min-width:170px; }
.toolbar__actions .btn{ height:38px; }

/* Tabla */
.table-wrap{ overflow:auto; border-radius:12px; }
.table{ width:100%; border-collapse:separate; border-spacing:0; }
.table thead th{
  position:sticky; top:0; background:#12151c; z-index:1;
  border-bottom:1px solid var(--line); padding:12px 10px; color:#ffd4d4; font-weight:700;
}
.table tbody td{ padding:12px 10px; border-bottom:1px solid var(--line); }
.table tbody tr:hover{ background: rgba(255,255,255,.03); }

/* Pastillas de estado (en la tabla) */
.pill{ display:inline-block; padding:2px 10px; border-radius:999px; font-size:.85rem; font-weight:700; }
.pill.ok{   background:#0f2a1d; color:#c7ffe0; border:1px solid #1f6042; }
.pill.warn{ background:#2a210f; color:#ffe7c7; border:1px solid #6a5221; }
.pill.err{  background:#2a1212; color:#ffcccc; border:1px solid #6b2a2a; }

/* Footer */
.foot{ text-align:center; margin: 10px 0 30px; color:var(--muted); }

/* Modal */
.overlay{ position:fixed; inset:0; background:rgba(0,0,0,.55); backdrop-filter:blur(2px);
  display:flex; align-items:center; justify-content:center; z-index:2000; }
.modal{
  width:min(560px,92vw); background:#14171c; border:1px solid rgba(255,255,255,.08);
  border-radius:14px; padding:20px 18px; box-shadow:0 18px 60px rgba(0,0,0,.45);
}
.modal h3{ margin:0 0 6px 0; }
.modal .row.right{ justify-content:flex-end; gap:10px; margin-top:12px; }
.modal.warn{ border-color:#5a3d1f; background:#1a120b; }
.modal.err{  border-color:#6b2323; background:#170d0d; }
.modal.ok{   border-color:#1e5734; background:#0e1a14; }

/* Fuerza que el overlay se oculte al tener [hidden] */
.overlay[hidden] { display: none !important; }
